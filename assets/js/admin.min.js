!function(a){"use strict";function b(){"boolean"==typeof this.checked&&(this.checked=!1),alert(mc4wp.strings.proOnlyNotice),event.stopPropagation()}function c(){var b=a(document.getElementById("mc4wp-send-welcome"));0==a(this).val()?b.removeClass("hidden").find(":input").removeAttr("disabled"):b.addClass("hidden").find(":input").attr("disabled","disabled").prop("checked",!1)}function d(){var b=a(document.getElementById("woocommerce-settings"));b.toggle(this.checked)}var e=a(document.getElementById("mc4wp-admin"));e.find(".pro-feature, .pro-feature label, .pro-feature :radio").click(b),e.find('input[name$="[double_optin]"]').change(c),e.find('input[name$="[show_at_woocommerce_checkout]"]').change(d);var f=function(){function b(){var b=K.val();if("undefined"!=typeof CodeMirror&&"object"==typeof window.mc4wpFormEditor&&(b=window.mc4wpFormEditor.getValue()),"string "==typeof b){b=b.toLowerCase();for(var c={},d=0;d<G.length;d++){var e='name="'+G[d].tag.toLowerCase();-1==b.indexOf(e)&&(c[G[d].tag]=G[d])}if(a.isEmptyObject(c))return void J.hide();I.html("");for(var f in c){var g=c[f],h=a("<li></li>");h.html(g.name+" (<code>"+g.tag+"</code>)"),h.appendTo(I)}J.show()}}function c(){s.find("option").not(".default").remove(),G=[],r.filter(":checked").each(function(){for(var b=a(this).val(),c=mc4wp.mailchimpLists[b],d=0,e=c.merge_vars.length;e>d;d++){var f=c.merge_vars[d];if(f.req&&G.push(f),0===t.children("option[value='"+f.tag+"']").length){var g=f.name.length>25?f.name.substring(0,25)+"..":f.name;f.req&&(g+="*");var h=a("<option />").text(g).val(f.tag).data("list-field",f);t.append(h)}}for(var d=0,i=c.interest_groupings.length;i>d;d++){var j=c.interest_groupings[d];if(0===u.children("option[value='"+j.id+"']").length){var g=j.name.length>25?j.name.substring(0,25)+"..":j.name,h=a("<option />").text(g).val(j.id).data("list-grouping",j);d>=1&&h.text(F.proOnly+" "+g).attr("disabled","disabled").data("list-grouping",null),u.append(h)}}}),b()}function d(){e();var b=a(this).find(":selected");switch(b.val()){case"_action":p="action",v.find(".wrap-p").show();break;case"submit":p="submit",x.text(F.buttonText),w.val(F.subscribe),v.find("p.row").filter(".value, .wrap-p").show();break;case"lists":p="lists",v.find(".wrap-p").show();break;default:var c=b.data("list-field");if(c)return j(c);var c=b.data("list-grouping");if(c)return g(c)}l()}function e(){v.find(".row :input").each(function(){a(this).is(":checkbox")?this.checked=!0:this.value=""}),v.find("p.row").hide(),y.find(":input").remove(),v.show(),p="text",q="",x.html(F.initialValue+" <small>"+F.optional+"</small>")}function f(b){for(var c=0,d=b.length;d>c;c++)a("<input />").attr("type","text").addClass("widefat").data("value",b[c].name).attr("placeholder",F.labelFor+' "'+b[c].name+'" '+F.orLeaveEmpty).attr("value",b[c].name).appendTo(y)}function g(a){switch(v.find("p.row").filter(".values, .label, .wrap-p").show(),z.val(a.name+":"),q="GROUPINGS["+a.id+"]",f(a.groups),a.form_field){case"radio":p="radio";break;case"hidden":v.find("p.row").filter(".values, .label, .wrap-p").hide(),v.find("p.row.value").show();for(var b=0,c=a.groups.length;c>b;b++)w.val(w.val()+a.groups[b].name+",");p="hidden";break;case"dropdown":p="select";break;default:p="checkbox",q+="[]"}l()}function h(){var b="";return r.each(function(){var c=a(this).val(),d=a(this).parent("label").text(),e="";a(this).is(":checked")&&(e+="checked "),b+="<label>\n",b+='	<input type="checkbox" name="_mc4wp_lists[]" value="'+c+'" '+e+" /> "+d+"\n",b+="</label>\n"}),b}function i(){for(var a=[{name:"subscribe",label:F.subscribe,checked:!0},{name:"unsubscribe",label:F.unsubscribe,checked:!1}],b="",c=0;c<a.length;c++){var d=a[c];b+="<label>\n",b+='	<input type="radio" name="_mc4wp_action" value="'+d.name+'" '+(d.checked?"checked":"")+" > "+d.label+"\n",b+="</label>\n"}return b}function j(b){var c={"default":["label","value","placeholder","required","wrap-p"],select:["label","required","wrap-p","values"],radio:["label","required","wrap-p","values"],date:["label","required","wrap-p","value"]},d={text:"text",email:"email",phone:"tel",address:"text",number:"number",dropdown:"select",date:"date",birthday:"date",radio:"radio",checkbox:"checkbox",url:"url"};if(p="undefined"!=typeof d[b.field_type]?d[b.field_type]:"text","undefined"!=typeof c[p])var e=c[p];else var e=c["default"];for(var f=0;f<e.length;f++)v.find("p.row."+e[f]).show();if(p=p,q=b.tag,A.val("Your "+b.name.toLowerCase()),z.val(b.name+":"),B.prop("checked",b.req),y.is(":visible")&&b.choices)for(var f=0;f<b.choices.length;f++)a("<input />").attr("type","text").addClass("widefat").data("value",b.choices[f]).attr("placeholder",F.labelFor+' "'+b.choices[f]+'" '+F.orLeaveEmpty).attr("value",b.choices[f]).appendTo(y);l()}function k(a){a=html_beautify(a),D.val(a)}function l(){var b,c=a("<div></div>");switch(p){case"action":var d=i();return n()&&(d="<p>"+d+"</p>"),k(d);case"lists":var d=h();return n()&&(d="<p>"+d+"</p>"),k(d);case"select":b=a("<select />"),y.find(":input").each(function(){a(this).val().length>0&&a("<option />").val(a(this).data("value")).text(a(this).val()).appendTo(b)});break;case"radio":case"checkbox":y.find(":input").each(function(){a(this).val().length>0&&(b=a("<input />").attr("type",p).attr("name",q).val(a(this).data("value")),B.is(":visible:checked")&&b.attr("required",!0),c.append(b),b.wrap("<label />"),a("<span />").text(a(this).val()+" ").insertAfter(b))});break;case"textarea":b=a("<textarea />");break;default:b=a("<input />").attr("type",p)}"radio"!==p&&"checkbox"!==p&&(q.length>0&&b.attr("name",q),w.is(":visible")&&w.val().length>0&&("textarea"===p?b.text(w.val()):b.attr("value",w.val())),A.is(":visible")&&A.val().length>0&&b.attr("placeholder",A.val()),B.is(":visible:checked")&&b.attr("required",!0),c.append(b)),z.is(":visible")&&z.val().length>0&&a("<label />").text(z.val()).prependTo(c),n()&&c.wrapInner(a("<p />")),k(c.html())}function m(){"function"==typeof CodeMirror&&"object"==typeof mc4wpFormEditor?mc4wpFormEditor.replaceSelection(D.val()):K.val(K.val()+"\n"+D.val()),K.change()}function n(){return C.is(":visible:checked")?!0:!1}function o(){var a=r.filter(":checked").length>0;H.toggle(!a),s.toggle(a)}if(document.getElementById("mc4wp-field-wizard")){var p,q,r=a(document.getElementById("mc4wp-lists")).find(":input"),s=a(document.getElementById("mc4wp-fw-mailchimp-fields")),t=s.find(".merge-fields"),u=s.find(".groupings"),v=a(document.getElementById("mc4wp-fw-fields")),w=a(document.getElementById("mc4wp-fw-value")),x=a(document.getElementById("mc4wp-fw-value-label")),y=a(document.getElementById("mc4wp-fw-values")),z=a(document.getElementById("mc4wp-fw-label")),A=a(document.getElementById("mc4wp-fw-placeholder")),B=a(document.getElementById("mc4wp-fw-required")),C=a(document.getElementById("mc4wp-fw-wrap-p")),D=a(document.getElementById("mc4wp-fw-preview")),E=a(document.getElementById("mc4wp-fw-add-to-form")),F=mc4wp.strings.fieldWizard,G=[],H=a(".mc4wp-notice.no-lists-selected"),I=a(document.getElementById("missing-fields-list")),J=a(document.getElementById("missing-fields-notice")),K=a(document.getElementById("mc4wp-form-content"));return r.change(c),r.change(o),s.change(d),v.change(l),E.click(function(){m(),"function"==typeof tb_remove&&tb_remove()}),K.bind({input:function(){K.unbind("keydown"),b.call(this)},keydown:b}),c(),{checkRequiredFields:b}}}();!function(b){function c(a){var b={},c=a.split("&");for(var d in c){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return b}function d(){var b=c(this.href);if("undefined"!=typeof b.tab){e.hide(),f.removeClass("nav-tab-active"),a(document.getElementById("nav-tab-"+b.tab)).addClass("nav-tab-active").blur();var d="tab-"+b.tab;return document.getElementById(d).style.display="block",history.pushState&&history.pushState("","",this.href),h.val(this.href),"function"==typeof tb_remove&&tb_remove(),mc4wpFormEditor.refresh(),!1}}var e=b.find(".tab"),f=b.find(".nav-tab"),g=b.find(".tab-link"),h=b.find('input[name="_wp_http_referer"]');f.click(d),g.click(d)}(a(document.getElementById("mc4wp-admin"))),function(a){var b=document.getElementById("mc4wp-form-content");b&&(a.mc4wpFormEditor=CodeMirror.fromTextArea(b,{selectionPointer:!0,matchTags:{bothTags:!0},mode:"text/html",htmlMode:!0,autoCloseTags:!0}),a.mc4wpFormEditor.on("change",f.checkRequiredFields))}(window),function(){function b(){var a=c.filter(":checked").val()>0,b=a?"1":"0.5";d.css("opacity",b)}var c=a(".integration-toggles-wrap input"),d=a(".integration-toggled-settings");c.change(b)}()}(jQuery);
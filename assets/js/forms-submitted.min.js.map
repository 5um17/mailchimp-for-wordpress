{"version":3,"sources":["forms-submitted.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","obj","_scrollToElement","__esModule","default","el","evtName","errors","data","timeStart","pageHeight","submittedForm","window","mc4wp_submitted_form","forms","mc4wp","populate","trigger","args","id","document","getElementById","element_id","event","Date","now","body","clientHeight","scrollY","auto_scroll","addEventListener","form","name","getAttribute","timeElapsed","./misc/scroll-to-element.js","populate.js","2","element","x","pageXOffset","documentElement","scrollLeft","y","elem","html","elemRect","getBoundingClientRect","documentHeight","Math","max","scrollHeight","offsetHeight","scrollPosition","bottom","height","maxScrollPosition","min","pageYOffset","calculateScrollOffset","scrollTo","3","basename","key","hasOwnProperty","value","constructor","Array","elements","namedItem","type","j","checked","indexOf","values","k","options","selected","toString","toISOString","split"],"mappings":"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","file":"forms-submitted.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nvar _scrollToElement = _interopRequireDefault(require(\"./misc/scroll-to-element.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar submittedForm = window.mc4wp_submitted_form;\nvar forms = window.mc4wp.forms;\n\nvar populate = require('populate.js');\n\nfunction handleFormRequest(el, evtName, errors, data) {\n  var trigger = function trigger(evtName, args) {\n    forms.trigger(el, args[0].id + '.' + evtName, args);\n    forms.trigger(el, evtName, args);\n  };\n\n  var timeStart = Date.now();\n  var pageHeight = document.body.clientHeight; // re-populate form if an error occurred\n\n  if (errors) {\n    populate(el, data);\n  } // scroll to form\n\n\n  if (window.scrollY <= 10 && submittedForm.auto_scroll) {\n    (0, _scrollToElement[\"default\"])(el);\n  } // trigger events on window.load so all other scripts have loaded\n\n\n  window.addEventListener('load', function () {\n    var form = {\n      name: el.getAttribute('data-name'),\n      id: el.getAttribute('data-id')\n    };\n    trigger('submitted', [form]);\n\n    if (errors) {\n      trigger('error', [form, errors]);\n    } else {\n      // form was successfully submitted\n      trigger('success', [form, data]); // subscribed / unsubscribed\n\n      trigger(evtName, [form, data]); // for BC: always trigger \"subscribed\" event when firing \"updated_subscriber\" event\n\n      if (evtName === 'updated_subscriber') {\n        trigger('subscribed', [form, data, true]);\n      }\n    } // scroll to form again if page height changed since last scroll, eg because of slow loading images\n    // (only if load didn't take too long to prevent overtaking user scroll)\n\n\n    var timeElapsed = Date.now() - timeStart;\n\n    if (submittedForm.auto_scroll && timeElapsed > 1000 && timeElapsed < 2000 && document.body.clientHeight !== pageHeight) {\n      (0, _scrollToElement[\"default\"])(el);\n    }\n  });\n}\n\nif (submittedForm) {\n  handleFormRequest(document.getElementById(submittedForm.element_id), submittedForm.event, submittedForm.errors, submittedForm.data);\n}\n\n},{\"./misc/scroll-to-element.js\":2,\"populate.js\":3}],2:[function(require,module,exports){\n\"use strict\";\n\nfunction scrollTo(element) {\n  var x = window.pageXOffset || document.documentElement.scrollLeft;\n  var y = calculateScrollOffset(element);\n  window.scrollTo(x, y);\n}\n\nfunction calculateScrollOffset(elem) {\n  var body = document.body;\n  var html = document.documentElement;\n  var elemRect = elem.getBoundingClientRect();\n  var clientHeight = html.clientHeight;\n  var documentHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n  var scrollPosition = elemRect.bottom - clientHeight / 2 - elemRect.height / 2;\n  var maxScrollPosition = documentHeight - clientHeight;\n  return Math.min(scrollPosition + window.pageYOffset, maxScrollPosition);\n}\n\nmodule.exports = scrollTo;\n\n},{}],3:[function(require,module,exports){\n\n/**\n * Populate form fields from a JSON object.\n *\n * @param form object The form element containing your input fields.\n * @param data array JSON data to populate the fields with.\n * @param basename string Optional basename which is added to `name` attributes\n */\nfunction populate(form, data, basename) {\n\tfor (var key in data) {\n\t\tif (! data.hasOwnProperty(key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar name = key;\n\t\tvar value = data[key];\n\n        if ('undefined' === typeof value) {\n            value = '';\n        }\n\n        if (null === value) {\n            value = '';\n        }\n\n\t\t// handle array name attributes\n\t\tif (typeof(basename) !== \"undefined\") {\n\t\t\tname = basename + \"[\" + key + \"]\";\n\t\t}\n\n\t\tif (value.constructor === Array) {\n\t\t\tname += '[]';\n\t\t} else if(typeof value == \"object\") {\n\t\t\tpopulate(form, value, name);\n\t\t\tcontinue;\n\t\t}\n\n\t\t// only proceed if element is set\n\t\tvar element = form.elements.namedItem(name);\n\t\tif (! element) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar type = element.type || element[0].type;\n\n\t\tswitch(type ) {\n\t\t\tdefault:\n\t\t\t\telement.value = value;\n\t\t\t\tbreak;\n\n\t\t\tcase 'radio':\n\t\t\tcase 'checkbox':\n\t\t\t\tfor (var j=0; j < element.length; j++) {\n\t\t\t\t\telement[j].checked = (value.indexOf(element[j].value) > -1);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'select-multiple':\n\t\t\t\tvar values = value.constructor == Array ? value : [value];\n\n\t\t\t\tfor(var k = 0; k < element.options.length; k++) {\n\t\t\t\t\telement.options[k].selected |= (values.indexOf(element.options[k].value) > -1 );\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'select':\n\t\t\tcase 'select-one':\n\t\t\t\telement.value = value.toString() || value;\n\t\t\t\tbreak;\n\n\t\t\tcase 'date':\n      \t\t\telement.value = new Date(value).toISOString().split('T')[0];\t\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n};\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = populate;\n} \n},{}]},{},[1]);\n"]}